# eve-shields

This is a small web service that allows the creation of [EVE online](https://en.wikipedia.org/wiki/Eve_Online) related dynamic shields that can be used on web sites or github pages. Like the ones below that show stats for this github repo and the **eve-shields** service.

![Repo license](https://img.shields.io/github/license/ErikKalkoken/eve-shields) ![Python](https://img.shields.io/badge/python-3.5-blue) ![Build](https://api.travis-ci.org/ErikKalkoken/eve-shields.svg?branch=master) ![Uptime Robot status](https://img.shields.io/uptimerobot/status/m783377950-d030d9c007b33bdb219ac4e5) 
[![Uptime Robot ratio](https://img.shields.io/uptimerobot/ratio/m783377950-d030d9c007b33bdb219ac4e5)](https://stats.uptimerobot.com/voNrrI7ooP)

## Shields

Here is an overview of all shield types this service can generate for you:

Name | Description | Category | Example
--- | --- | --- | ---
dangerRatio | Danger classification by zKillboard | zkb-stats | ![DangerRatio](https://img.shields.io/endpoint?url=https://eve-shields.kalkoken.net/zkb-stats/alliance/498125261/dangerRatio)
iskDestroyed | Total ISK destroyed | zkb-stats | ![Dummy](https://img.shields.io/endpoint?url=https://eve-shields.kalkoken.net/zkb-stats/alliance/498125261/iskDestroyed)
iskLost | Total ISK lost | zkb-stats | ![Dummy](https://img.shields.io/endpoint?url=https://eve-shields.kalkoken.net/zkb-stats/alliance/498125261/iskLost)
memberCount | Total ISK lost | zkb-stats| ![Dummy](https://img.shields.io/endpoint?url=https://eve-shields.kalkoken.net/zkb-stats/alliance/498125261/memberCount)
shipsDestroyed | Total ships destroyed | zkb-stats | ![Dummy](https://img.shields.io/endpoint?url=https://eve-shields.kalkoken.net/zkb-stats/alliance/498125261/shipsDestroyed)
shipsLost | Total ships lost  | zkb-stats| ![Dummy](https://img.shields.io/endpoint?url=https://eve-shields.kalkoken.net/zkb-stats/alliance/498125261/shipsLost)

All examples are generated live with data from zKillboard for Test Alliance Please Ignore.

## How it works

The shield are created by a service called [shields.io](shields.io), which is providing many different shields for people to use. They also provide an API for dynamically creating shields with custom input from an endpoint.

**eve-shields** functions as such an endpoint and provides all data in the required format to shields.io for creating Eve Online related shields. Data is dynamically loaded from APIs like zKillboard API as needed.

## How to use it

I am hosting this service on a server and you are free to use it directly for your website or github pages (while I strive to provide a stable service I can not guarantee any service level though. so use at your own risk.).

Or you can install and run it on your own web server. There are many ways, but I recommend using PyInstaller, which is the easiest. You will need a web server (e.g. NGINX) and a WSGI server (e.g Gunicorn) to run it.

```bash
pip install git+https://github.com/ErikKalkoken/eve-shields
```

Note that if you run it yourself you need to have SSL, because shields.io only accepts https links as endpoint.

## Syntax

To create your own shield use the JSON endpoint URL from shield.io and add the endpoint URL from eve-shields for the `url` parameter.

Here is a complete example url for creating a members count shield for Test Alliance Please Ignore:

```plain
https://img.shields.io/endpoint?url=https://eve-shields.kalkoken.net/zkb-stats/alliance/498125261/memberCount
```

Let's break this down in its two parts: shields.io and **eve-shields**.

### shields.io

The syntax for [shields.io JSON endpoint](https://shields.io/endpoint) is:

```plain
https://img.shields.io/endpoint?url={url-eve-shields}&style=...
```

### eve-shields

The basic syntax for the  eve shields endpoint url is:

```plain
https://eve-shields.kalkoken.net/{category}/...
```

 `category` defines the category of shields to create. Currently only `zkb-stats` is supported.

Note that you still can add query parameters from shields.io to customize your shield, e.g. if you want to override the color (`color`) or label (`label`) generated by eve-shield.

### category: zkb-stats

`zkb-stats` provides zKillboard statistics for EVE entities.  See [here](https://github.com/zKillboard/zKillboard/wiki/API-(Statistics)) for details on the API. Please note though that only a sub set is currently implemented.

#### syntax

The syntax for the 

```plain
https://eve-shields.kalkoken.net/zkb-stats/{entity-type}/{entity-id}/{shield-name}
```

- `entity-type`: name of the EVE entity type. The following types are supported:
  - alliance
  - character
  - corporation  
  - faction
  - region
  - shipGroup
  - shipType  
  - solarSystem
- `entity-id`: a valid EVE ID corresponding to the entity type, e.g. `498125261` for Test Alliance Please Ignore.
- `shield-name`: name of the shield to create. Note that not all shields are available for every entity type, e.g. there is no member count for ships. See section **Shields** for a list of all shield names.

## Contributions

Help and contributions are welcome.

## Credits

Special thanks to the guys at [shields.io](https://shields.io) for their great service.
